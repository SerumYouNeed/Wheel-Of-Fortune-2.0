<div th:fragment="playField" xmlns:th="http://www.w3.org/1999/xhtml">
    <div class="container">

        <!-- user nickname and money -->
        <div class="user">
            <span th:text="${user_name}"></span>
            <div id="player-balance"></div>
        </div>

        <!-- Field with button for puzzle select and puzzle itself -->
        <div class="puzzle" id="puzzle"
             hx-get="/select-puzzle"
             hx-trigger="load"
             hx-swap="innerHTML">
        </div>

        <!-- Wheel with prices -->
        <div class="wheel">
            <div class="wheel-img">
                <svg width="220" height="220" viewBox="0 0 220 220">
                    <g>
                        <!-- 6 sectors on wheel -->
                        <path data-sector="1" id="sector-0" d="M110,110 L110,10 A100,100 0 0,1 203.511,55.000 Z" fill="#FFD700"/>
                        <path data-sector="2" id="sector-1" d="M110,110 L203.511,55.000 A100,100 0 0,1 203.511,165.000 Z" fill="#FF6347"/>
                        <path data-sector="3" id="sector-2" d="M110,110 L203.511,165.000 A100,100 0 0,1 110,210 Z" fill="#90EE90"/>
                        <path data-sector="4" id="sector-3" d="M110,110 L110,210 A100,100 0 0,1 16.489,165.000 Z" fill="#87CEEB"/>
                        <path data-sector="5" id="sector-4" d="M110,110 L16.489,165.000 A100,100 0 0,1 16.489,55.000 Z" fill="#FFB6C1"/>
                        <path data-sector="6" id="sector-5" d="M110,110 L16.489,55.000 A100,100 0 0,1 110,10 Z" fill="#D3D3D3"/>
                        <!-- Prices -->
                        <text id="label-0" x="110" y="40" text-anchor="middle" font-size="16" fill="#333">$10</text>
                        <text id="label-1" x="175" y="80" text-anchor="middle" font-size="16" fill="#333">$20</text>
                        <text id="label-2" x="175" y="150" text-anchor="middle" font-size="16" fill="#333">$30</text>
                        <text id="label-3" x="110" y="190" text-anchor="middle" font-size="16" fill="#333">$40</text>
                        <text id="label-4" x="45" y="150" text-anchor="middle" font-size="16" fill="#333">$50</text>
                        <text id="label-5" x="45" y="80" text-anchor="middle" font-size="16" fill="#333">$100</text>
                    </g>
                    <!-- Arrow on top -->
                    <polygon points="105,0 115,0 110,20" fill="#333"/>
                </svg>
            </div>

            <button class="spin-btn"
                    hx-post="/game/spin-the-wheel"
                    hx-target=".spinning-result"
                    hx-swap="innerHTML">Spin the wheel!
            </button>
            <div class="spinning-result"></div>
        </div>


        <!-- Message after picking the same letter twice -->
        <div class="message"></div>

        <!-- Input field for letter from user -->
        <form hx-post="/game/guess-letter"
              hx-swap="innerHTML">
            <div class="letter-input">
                <label for="custom-letter">Enter letter:</label>
                <input type="text" id="custom-letter" name="letter" maxlength="1" pattern="[A-Za-z]" required/>
                <button type="submit" class="submit-letter-btn">OK</button>
            </div>
        </form>

        <!-- Input button for puzzle guess from user -->
        <h3>Think you know the answer? Take a guess for $1000!</h3>
        <button class="guess-puzzle-btn"
                hx-get="/game/know-the-answer"
                hx-target="#main"
                hx-swap="innerHTML">Guess!
        </button>

        <div>
            <button class="save-exit-btn"
            hx-get="/game/exit"
            hx-target="#main"
            hx-swap="innerHTML">Exit</button>
        </div>

    </div>
</div>

<!-- Current prize from wheel -->
<div th:fragment="spinResult" xmlns:th="http://www.w3.org/1999/xhtml">
    <div class="result-box" th:attr="data-result=${field}">
        <h2>Each letter is worth <span th:text="${prize}"></span>$!</h2>
    </div>
</div>

<!--<div th:fragment="spinResult" xmlns:th="http://www.w3.org/1999/xhtml">-->
<!--    <div th:attr="data-result=${field}">-->
<!--        <h2>Each letter is worth <span th:text="${prize}"></span>$!</h2>-->
<!--    </div>-->
<!--    <h1>-->
<!--        <span class="prize">Each letter is worth: $<b th:text="${prize}"></b></span>-->
<!--    </h1>-->
<!--</div>-->

<!-- Current state of the puzzle -->
<div class="puzzle"
     th:fragment="puzzleField"
     xmlns:th="http://www.w3.org/1999/xhtml"
     th:style="|--max-word: ${maxWordLength}|">
    <h3>
        <span class="category">Category: <b th:text="${category}"></b></span>
    </h3>
    <div class="word" th:each="word, iter : ${words}"
         th:classappend="${#lists.size(word) == 1} ? ' word-1'">
        <span class="letter"
              th:each="letter : ${word}"
              th:text="${letter}">
        </span>

        <span class="space-tile"
              th:if="${!iter.last}">
        </span>
    </div>
</div>

<!-- After picking the same letter again -->
<div th:fragment="alreadyPicked" xmlns:th="http://www.w3.org/1999/xhtml">
    <div class="alert">
        <span class="highlight">Sorry, "<b th:text="${letter}"></b>" was already picked.</span>
    </div>
</div>

<!-- Message after spinning the wheel for the second time -->
<div th:fragment="wheelAlreadySpun" xmlns:th="http://www.w3.org/1999/xhtml">
    <div class="alert">
        <span class="highlight">You have already spun the wheel this turn!</span>
    </div>
</div>

<!-- Message for picking a letter second time in the same turn -->
<div th:fragment="wrongTurn" xmlns:th="http://www.w3.org/1999/xhtml">
    <div class="alert">
        <span class="highlight">You can't pick the letter twice in the same turn!</span>
    </div>
</div>

<!-- Player balance -->
<div th:fragment="balance" xmlns:th="http://www.w3.org/1999/xhtml">
    <span>$<b th:text="${money}"></b></span>
</div>

<!-- Exit card -->
<div th:fragment="exitScreen" xmlns:th="http://www.w3.org/1999/xhtml">
    <div class="exit-screen" style="text-align: center; padding: 60px 20px;">
        <h1 style="font-size: 2.5em; color: #333; margin-bottom: 20px;">
            Thank you for playing!
        </h1>
        <p style="font-size: 1.2em; color: #555; margin-bottom: 40px;">
            We hope you enjoyed the game. See you next time!
        </p>
        <button
                hx-get="/home"
                hx-target="#main"
                hx-swap="innerHTML">Back to main menu
        </button>
    </div>
</div>
